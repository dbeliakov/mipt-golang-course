# API Retries

При работе с каким-нибудь API достаточно часто возникают ошибки, которые зачастую надо еще и ретраить.

Допустим, у нас есть простой интерфейс key-value кэша:
```go
type SimpleAPI interface {
	Get(key string) (val *Value, epoch uint64, err error)
	Set(key string, targetEpoch uint64, value *Value) error
}
```

Вам нужно написать функцию, которая принимает реализацию описанного интерфейса, ключ и функцию, которая обновляет значение. Функция должна по ключу получить значение из API, обновить его, используя полученную функцию, и сохранить. В процессе могут возникать разные виды ошибок:
- таймауты и ошибки сети (`ErrTimeout`, `ErrNetworkFault`) нужно ретраить
- если значение по ключу не нашлось (`APIError.Status() == StatusNotFound`) или произошла фатальная ошибка на стороне апи (`APIError.Status() == StatusFatalError`), ошибку нужно вернуть из функции
- если кто-то уже успел обновить значение быстрее нас (`APIError.Status() == StatusValueTooOld`), нужно снова попробовать получить значение по ключу и обновлять уже новое значение

Для данной задачи допустим, что ретраить можно без ожидания между попытками бесконечное количество раз.

Вам пригодятся:
- [errors.Is](https://pkg.go.dev/errors#Is)
- [errors.As](https://pkg.go.dev/errors#As)
